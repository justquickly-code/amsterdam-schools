# Changelog

## Unreleased
- Public /planner: remove/hide “Show inactive” toggle (not intuitive for end users).
- Admin: keep “Show inactive” capability, move it to an admin-only open-days view (/admin/open-days).
- Docs: clarified canonical planner route and Top 12 wording; added Doc Audit Report to CHANGELOG_AUDIT.
- Docs: aligned PRD-status CL IDs, Open Days routing notes, Top 12 subset wording, planned open day model, and admin auth requirements.
- Docs: aligned Open Days wording in README/PRD-status/Cursor prompt pack.
- Docs: removed boilerplate web/README.md (use root README only).
- Docs: added minimal web/README.md pointer to root README.
- Admin: compute-commutes now requires explicit workspace_id and validates against session.
- Security: open-days ICS endpoint no longer uses service role.
- Open Days: calendar download now uses authenticated fetch to support RLS.
- Admin: sync-open-days now requires ADMIN_SYNC_TOKEN in production (fail-closed).
- Routes: /planner is canonical; /open-days now redirects to /planner.
- Shortlist: added /shortlist/print export view with print button.
- Schools: added sort toggle for Name/Bike time with unknown commutes last.
- Open Days: syncedAt uses latest row, year defaults to latest with selector, and event types normalized.
- Commutes: added user-safe on-demand compute for missing commutes.
- Settings: saving home address triggers background commute compute.
- Settings: normalize postcode to 1234AB and enforce postcode+house pairing.
- Commutes: changing home address clears cached commutes and forces re-geocode.
- Open Days: removed commute times from the planner list (reduces visual noise).
- Commutes: address changes can force recompute even if cache clear is blocked.
- Commutes: compute endpoint now reports route/upsert failures for debugging.
- RLS: allow workspace members to read/write commute_cache (owner can delete).
- Commutes: Settings now computes all school commutes in batches; Schools page avoids background refresh.
- Admin: admin token stored in sessionStorage only; admin APIs require allowlisted email.
- Admin: admin pages now gate access for non-allowlisted users.
- UI: removed oai_citation artifact from admin sync copy.
- Commutes: Settings computes only missing commutes when address unchanged.
- Shortlist: retry once on rank conflict before failing.
- UI: friendly labels for supported levels (e.g., VMBO variants).
- Docs: marked completed CL items as DONE in CHANGELOG_AUDIT.
